2024-02-09T16:41:56.457Z
cwd: ~/prototypes/ffc-regulation-and-enforcement-prototype
package: govuk-prototype-kit@13.16.0
argv: ~/.nvm/versions/node/v18.18.0/bin/node ~/.npm/_npx/751a68202a4807b7/node_modules/.bin/govuk-prototype-kit migrate
Started [Check migration is being applied to a pre v13 prototype]
Succeeded [Check migration is being applied to a pre v13 prototype]
2024-02-09T16:42:05.481Z
cwd: ~/prototypes/ffc-regulation-and-enforcement-prototype
package: govuk-prototype-kit@13.16.0
argv: ~/.nvm/versions/node/v18.18.0/bin/node ~/prototypes/ffc-regulation-and-enforcement-prototype/node_modules/.bin/govuk-prototype-kit migrate -- ~/prototypes/ffc-regulation-and-enforcement-prototype
Started [Migrate config.js to config.json]
Started [Update application SCSS file]
Started [Deleted files that are no longer needed]
Started [Deleted directories that are no longer needed]
Started [Delete listen-on-port.js]
Started [Delete server.js]
Started [Delete start.js]
Started [Delete gulpfile.js]
Started [Delete VERSION.txt]
Started [Delete app/assets/sass/application-ie8.scss]
Started [Delete Procfile]
Started [Delete app/assets/sass/unbranded-ie8.scss]
Started [Remove unused directory docs]
Started [Remove unused directory gulp]
Started [Remove unused directory lib]
Succeeded [Migrate config.js to config.json]
Succeeded [Delete listen-on-port.js]
Succeeded [Delete gulpfile.js]
Succeeded [Delete start.js]
Succeeded [Delete app/assets/sass/application-ie8.scss]
Succeeded [Delete server.js]
Succeeded [Delete VERSION.txt]
Succeeded [Delete app/assets/sass/unbranded-ie8.scss]
Succeeded [Delete Procfile]
Succeeded [Deleted files that are no longer needed]
Found [// Add your routes here - above the module.exports line] in [app/routes.js], replacing
Started [Overwrite app/assets/javascripts/application.js]
Started [Overwrite app/filters.js]
Started [Overwrite app/views/layout.html]
Found [// Add extra styles here, or re-organise the Sass files in whichever way makes most sense to you] in [app/assets/sass/application.scss], replacing
Started [Delete app/assets/images/separator-2x.png]
Copying from [node_modules/govuk-prototype-kit/prototype-starter/app/assets/javascripts/application.js] to [app/assets/javascripts/application.js]
Keeping these lines from old file
Started [Update app/filters.js]
Started [Delete app/assets/images/separator.png]
Started [Delete app/assets/javascripts/auto-store-data.js]
Failed [Overwrite app/views/layout.html]
Started [Delete app/assets/sass/unbranded.scss]
Started [Delete app/assets/images/unbranded.ico]
Started [Delete app/views/includes/breadcrumb_examples.html]
Started [Delete app/views/includes/cookie-banner.html]
Started [Delete app/assets/javascripts/jquery-1.11.3.js]
Started [Delete app/views/includes/scripts.html]
Started [Delete app/assets/sass/patterns/_step-by-step-header.scss]
Started [Delete app/views/includes/head.html]
Started [Delete app/assets/sass/patterns/_related-items.scss]
Started [Delete app/assets/sass/patterns/_step-by-step-related.scss]
Started [Delete app/views/layout_unbranded.html]
Started [Delete app/assets/sass/patterns/_task-list.scss]
Keeping these lines from old file
Started [Delete app/assets/sass/patterns/_step-by-step-nav.scss]
Succeeded [Remove unused directory gulp]
Failed [Delete app/views/includes/scripts.html]
Succeeded [Delete app/assets/images/separator-2x.png]
Succeeded [Delete app/assets/images/separator.png]
Succeeded [Delete app/assets/javascripts/auto-store-data.js]
Succeeded [Delete app/assets/images/unbranded.ico]
Succeeded [Delete app/views/includes/breadcrumb_examples.html]
Succeeded [Delete app/assets/sass/unbranded.scss]
Succeeded [Delete app/views/includes/cookie-banner.html]
Succeeded [Delete app/views/includes/head.html]
Succeeded [Delete app/assets/sass/patterns/_step-by-step-header.scss]
Succeeded [Delete app/assets/sass/patterns/_related-items.scss]
Succeeded [Delete app/assets/sass/patterns/_step-by-step-related.scss]
Succeeded [Delete app/views/layout_unbranded.html]
Succeeded [Delete app/assets/sass/patterns/_task-list.scss]
Succeeded [Update application SCSS file]
Succeeded [Delete app/assets/javascripts/jquery-1.11.3.js]
Succeeded [Delete app/assets/sass/patterns/_step-by-step-nav.scss]
//,// For guidance on how to create routes see:,// https://prototype-kit.service.gov.uk/docs/create-routes,//,,const govukPrototypeKit = require('govuk-prototype-kit'),const router = govukPrototypeKit.requests.setupRouter(),,// Add your routes here,,,// GET SPRINT NAME - useful for relative templates,router.use('/', (req, res, next) => {,  res.locals.currentURL = req.originalUrl; //current screen,  res.locals.prevURL = req.get('Referrer'); // previous screen,  req.folder = req.originalUrl.split('/')[1]; //folder, e.g. 'current',  req.subfolder = req.originalUrl.split('/')[2]; //sub-folder e.g. 'service',  res.locals.folder = req.folder; // what folder the url is,  res.locals.subfolder = req.subfolder; // what subfolder the URL is in,  console.log('folder : ' + res.locals.folder + ', subfolder : ' + res.locals.subfolder  );,  console.log('previous page is: ' + res.locals.prevURL + " and current page is " + req.url + " " + res.locals.currentURL );,  next();,});,,,,// Route index page,router.get('/', function (req, res) {,  res.render('./index'),});,,,,// Set service name based on sub folders for different prototypes,router.get('/grants-prototype/views/water/*', function(req, res, next){,  res.locals['serviceName'] = 'Apply for a large grant for a water resource management project',  next(),});,,// Set service name based on sub folders for different prototypes,router.get('/grants-prototype/views/slurry/*', function(req, res, next){,  res.locals['serviceName'] = 'Apply for a large grant for slurry equipment',  next(),});,,router.get('/v2/*', function(req, res, next){,  res.locals['serviceName'] = 'Apply for a large countryside productivity grant for water',  next(),});,,router.get('/s1/*', function(req, res, next){,  res.locals['serviceName'] = 'Guidance on Salmonella rules',  next(),});,,// Start folder specific route,router.use('/grants-prototypet', require('./views/grants-prototype/routes/_routes-water'));,router.use('/grants-prototype', require('./views/grants-prototype/routes/_routes-slurry'));,,router.use('/s1', require('./views/s1/routes/_routes'));,,,// Task list status settings,,,,//*****************************************************,// TASK LIST PAGE START //,,,// TASK LIST PAGE END //,,,module.exports = router,
Found [module.exports = router;,module.exports = router] in [app/routes.js], removing
Succeeded [Remove unused directory lib]
Succeeded [Update app/filters.js]
Succeeded [Overwrite app/filters.js]
Succeeded [Remove unused directory docs]
Succeeded [Deleted directories that are no longer needed]
Succeeded [Update routes file]
Succeeded [Overwrite app/assets/javascripts/application.js]
ENOENT: no such file or directory, stat '/Users/joelanman/prototypes/ffc-regulation-and-enforcement-prototype/app/views/layout_unbranded.html'
Error: ENOENT: no such file or directory, stat '/Users/joelanman/prototypes/ffc-regulation-and-enforcement-prototype/app/views/layout_unbranded.html'
